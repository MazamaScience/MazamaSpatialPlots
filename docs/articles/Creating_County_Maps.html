<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Creating County Maps • MazamaSpatialPlots</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Creating County Maps">
<meta property="og:description" content="MazamaSpatialPlots">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">MazamaSpatialPlots</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/MazamaSpatialPlots.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Creating_County_Maps.html">Creating County Maps</a>
    </li>
    <li>
      <a href="../articles/Creating_State_Maps.html">Creating State Maps</a>
    </li>
    <li>
      <a href="../articles/Customizing_State_Maps.html">Customizing State Maps</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/MazamaScience/MazamaSpatialPlots/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Creating County Maps</h1>
                        <h4 data-toc-skip class="author">Mazama
Science</h4>
            
            <h4 data-toc-skip class="date">February 4, 2020</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/MazamaScience/MazamaSpatialPlots/blob/HEAD/vignettes/articles/Creating_County_Maps.Rmd" class="external-link"><code>vignettes/articles/Creating_County_Maps.Rmd</code></a></small>
      <div class="hidden name"><code>Creating_County_Maps.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="objective">Objective<a class="anchor" aria-label="anchor" href="#objective"></a>
</h2>
<p>The goal of this document is to introduce the
<code><a href="../reference/countyMap.html">countyMap()</a></code> function in the
<strong>MazamaSpatialPlots</strong> package. It demonstrates default
usage and customizations using the <code><a href="../reference/countyMap.html">countyMap()</a></code> function’s
arguments.</p>
</div>
<div class="section level2">
<h2 id="default-plots">Default Plots<a class="anchor" aria-label="anchor" href="#default-plots"></a>
</h2>
<p>The <code><a href="../reference/countyMap.html">countyMap()</a></code> function requires three types of data.
The first two are simple features data frames (SFDF) containing state
and county level polygons. The SFDF containing state level polygons must
include the variable <code>stateCode</code> in its
<code>slot. Similarly, the SFDF containing county level polygons must include the variable `countyFIPS` in its</code>
slot. The default state and county level SFDF’s are
<code>USCensusStates_02</code> and <code>USCensusCounties_02</code>
respectively, and are part of the package data. Higher or lower
resolution US Census state and county SFDFs can be installed with:</p>
<pre><code><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/MazamaScience/MazamaSpatialUtils" class="external-link">MazamaSpatialUtils</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/MazamaSpatialUtils/man/setSpatialDataDir.html" class="external-link">setSpatialDataDir</a></span><span class="op">(</span><span class="st">'~/Data/Spatial_0.8'</span><span class="op">)</span>    <span class="co"># default directory for spatial data</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/MazamaSpatialUtils/man/installSpatialData.html" class="external-link">installSpatialData</a></span><span class="op">(</span><span class="st">'USCensusStates'</span><span class="op">)</span>   <span class="co"># state level polygons</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/MazamaSpatialUtils/man/installSpatialData.html" class="external-link">installSpatialData</a></span><span class="op">(</span><span class="st">'USCensusCounties'</span><span class="op">)</span> <span class="co"># county level polygons</span></span></code></pre>
<p>The third dataset is a regular dataframe that contains the variable
<code>countyFIPS</code> as well as a variable of interest. The variable
of interest from this dataset is indicated using the
<code>parameter</code> argument. This <code>parameter</code> is used to
determine the colors of counties in the generated chloropleth map.</p>
<p>The next two examples demonstrate obtaining, summarizing, and mapping
county-level data. The first uses an example dataframe from the package
and the second demonstrates using <code><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv()</a></code> to pull data
from the web and filling in missing <code>countyFIPS</code> using
<code><a href="https://rdrr.io/pkg/MazamaSpatialUtils/man/US_countyCodes.html" class="external-link">MazamaSpatialUtils::US_countyCodes</a></code>.</p>
<div class="section level3">
<h3 id="using-package-dataframe-example_us_countycovid">Using package dataframe <code>example_US_countyCovid</code><a class="anchor" aria-label="anchor" href="#using-package-dataframe-example_us_countycovid"></a>
</h3>
<p>In this example, the package-internal dataframe,
<code>example_US_countyCovid</code>, is used directly:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/MazamaScience/MazamaSpatialPlots" class="external-link">MazamaSpatialPlots</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/countyMap.html">countyMap</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">example_US_countyCovid</span>,</span>
<span>  parameter <span class="op">=</span> <span class="st">'cases'</span>,</span>
<span>  breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">100</span>,<span class="fl">200</span>,<span class="fl">500</span>,<span class="fl">1000</span>,<span class="fl">2000</span>,<span class="fl">5000</span>,<span class="fl">10000</span>,<span class="fl">20000</span>,<span class="fl">50000</span>,<span class="fl">1e6</span><span class="op">)</span>,</span>
<span>  state_SFDF <span class="op">=</span> <span class="st">"USCensusStates_02"</span>, <span class="co"># the default value</span></span>
<span>  county_SFDF <span class="op">=</span> <span class="st">"USCensusCounties_02"</span>, <span class="co"># the default value</span></span>
<span>  title <span class="op">=</span> <span class="st">"Covid cases by county -- June 01, 2020"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="Creating_County_Maps_files/figure-html/plot_obesity-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="using-data-found-online">Using data found online<a class="anchor" aria-label="anchor" href="#using-data-found-online"></a>
</h3>
<p>County level data of interest can be found online and easily loaded
using <code><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv()</a></code> or scraped using
<code><a href="https://rdrr.io/pkg/MazamaCoreUtils/man/html_getTables.html" class="external-link">MazamaCoreUtils::html_getTable()</a></code> to parse all table
elements from a website. Using these loading/scraping functions in
conjunction with <code><a href="../reference/countyMap.html">countyMap()</a></code> makes it very easy to extract
and visualize data from the internet.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># readme for data: https://healthinequality.org/dl/health_ineq_online_table_12_readme.pdf</span></span>
<span><span class="va">URL</span> <span class="op">&lt;-</span> <span class="st">"https://healthinequality.org/dl/health_ineq_online_table_12.csv"</span></span>
<span><span class="va">characteristicsData</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="va">URL</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Added required 'stateCode' and 'countyFIPS' variables</span></span>
<span><span class="va">characteristicsData</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">characteristicsData</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    stateCode <span class="op">=</span> <span class="va">stateabbrv</span>,</span>
<span>    countyFIPS <span class="op">=</span> <span class="fu">MazamaSpatialUtils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/MazamaSpatialUtils/man/US_countyConversion.html" class="external-link">US_countyNameToFIPS</a></span><span class="op">(</span><span class="va">stateCode</span>, <span class="va">county_name</span><span class="op">)</span>,</span>
<span>    pUninsured2010 <span class="op">=</span> <span class="va">puninsured2010</span>,</span>
<span>    .keep <span class="op">=</span> <span class="st">"none"</span></span>
<span>  <span class="op">)</span> </span>
<span></span>
<span><span class="co"># Create map</span></span>
<span><span class="fu"><a href="../reference/countyMap.html">countyMap</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">characteristicsData</span>,</span>
<span>  parameter <span class="op">=</span> <span class="st">'pUninsured2010'</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Percentage of population uninsured in 2010"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="Creating_County_Maps_files/figure-html/readcsv_and_coutymap-1.png" width="700"></p>
</div>
</div>
<div class="section level2">
<h2 id="customizing-with-function-parameters">Customizing with Function Parameters<a class="anchor" aria-label="anchor" href="#customizing-with-function-parameters"></a>
</h2>
<p>In the above examples, the <code><a href="../reference/countyMap.html">countyMap()</a></code> inputs
<code>data</code>, <code>parameter</code>, <code>state_SFDF</code>,
<code>county_SFDF</code> and <code>title</code> are used to create maps.
This section will demonstrate how to use the other input parameters to
customize your map.</p>
<div class="section level3">
<h3 id="using-palette-breaks-and-statebordercolor">Using palette, breaks, and stateBorderColor<a class="anchor" aria-label="anchor" href="#using-palette-breaks-and-statebordercolor"></a>
</h3>
<p>The <code>palette</code>, <code>breaks</code>, and
<code>stateBorderColor</code> parameters dictate the coloring of your
map. Colors are defined with <code>palette</code> and the distribution
of color across the map is defined with <code>breaks</code>. As
expected, <code>stateBorderColor</code> defines the state border
color.</p>
<p>To make the most of these parameters, see the following references
for R colors and palettes:</p>
<ul>
<li><p><a href="http://sape.inf.usi.ch/quick-reference/ggplot2/colour" class="external-link uri">http://sape.inf.usi.ch/quick-reference/ggplot2/colour</a></p></li>
<li><p><a href="https://www.r-graph-gallery.com/38-rcolorbrewers-palettes.html" class="external-link uri">https://www.r-graph-gallery.com/38-rcolorbrewers-palettes.html</a></p></li>
</ul>
<p>In this example, <code>breaks</code> is used to create a coarser
coloring scheme and <code>palette</code> is used to customize the exact
color for each obesity rate level. The vector of <code>breaks</code>
will be one longer than the vector of <code>colors</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/countyMap.html">countyMap</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">example_US_countyCovid</span>,</span>
<span>  parameter <span class="op">=</span> <span class="st">'cases'</span>,</span>
<span>  palette <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lightblue"</span>, <span class="st">"orange"</span>, <span class="st">"red"</span><span class="op">)</span>,</span>
<span>  breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1000</span>,<span class="fl">10000</span>,<span class="fl">50000</span>,<span class="fl">1e6</span><span class="op">)</span>,</span>
<span>  countyBorderColor <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Covid cases by county -- June 01, 2020"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="Creating_County_Maps_files/figure-html/plotColors-1.png" width="700"></p>
<p>In this example, <code>breaks</code> is used to create a more
detailed coloring scheme and the <strong>RColorBrewer</strong> blue to
purple color palette name is chosen.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/countyMap.html">countyMap</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">example_US_countyCovid</span>,</span>
<span>  parameter <span class="op">=</span> <span class="st">'cases'</span>,</span>
<span>  palette <span class="op">=</span> <span class="st">'BuPu'</span>,</span>
<span>  breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">100</span>,<span class="fl">200</span>,<span class="fl">500</span>,<span class="fl">1000</span>,<span class="fl">2000</span>,<span class="fl">5000</span>,<span class="fl">10000</span>,<span class="fl">20000</span>,<span class="fl">50000</span>,<span class="fl">1e6</span><span class="op">)</span>,</span>
<span>  countyBorderColor <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Covid cases by county -- June 01, 2020"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="Creating_County_Maps_files/figure-html/plotStates-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="using-conusonly-and-statecode">Using conusOnly and stateCode<a class="anchor" aria-label="anchor" href="#using-conusonly-and-statecode"></a>
</h3>
<p>The <code>conusOnly</code> and <code>stateCode</code> parameters
define which states will be included in the map. If
<code>stateCode</code> is defined, then <code>conusOnly</code> will be
ignored. If <code>stateCode</code> is not defined, then
<code>conusOnly</code> specifies whether the map is limited to the
continental US. When <code>conusOnly = FALSE</code>, the continental
U.S., Alaska, Hawaii, and U.S. Territories will be included.</p>
<p>This example builds upon the previous example and includes
<code>stateCode</code> specification to create a map of Western
states.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/countyMap.html">countyMap</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">example_US_countyCovid</span>,</span>
<span>  parameter <span class="op">=</span> <span class="st">'cases'</span>,</span>
<span>  palette <span class="op">=</span> <span class="st">'BuPu'</span>,</span>
<span>  breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">100</span>,<span class="fl">200</span>,<span class="fl">500</span>,<span class="fl">1000</span>,<span class="fl">2000</span>,<span class="fl">5000</span>,<span class="fl">10000</span>,<span class="fl">20000</span>,<span class="fl">50000</span>,<span class="fl">1e6</span><span class="op">)</span>,</span>
<span>  countyBorderColor <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>  stateCode <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CA"</span>, <span class="st">"NV"</span>, <span class="st">"OR"</span>, <span class="st">"WA"</span>, <span class="st">"ID"</span><span class="op">)</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Covid cases by county -- June 01, 2020"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="Creating_County_Maps_files/figure-html/use_stateCode-1.png" width="700"></p>
</div>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>The <code><a href="../reference/countyMap.html">countyMap()</a></code> function allows us to create attractive
maps with a minimum of effort. When used alongside loading and scraping
functions such as <code>read.csv</code> and
<code><a href="https://rdrr.io/pkg/MazamaCoreUtils/man/html_getTables.html" class="external-link">MazamaCoreUtils::html_getTable()</a></code>, U.S. county data can be
procured and visualized in very few lines of code. Similarly to
<code><a href="../reference/stateMap.html">stateMap()</a></code>, county level choropleth maps can be customized
by <a href="Customizing_State_Maps.html">harnessing the functionality of
the <strong>tmap</strong> package</a>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Jonathan Callahan, Rachel Carroll, Eli Grosman.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
